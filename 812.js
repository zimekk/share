"use strict";(self.webpackChunk_dev_app=self.webpackChunk_dev_app||[]).push([[812],{9082:(e,t,r)=>{r.d(t,{L:()=>o,V:()=>s});var n=r(6647),i=r(9385);const o=new n.GraphQLClient(`${location.pathname}graphql`,{headers:{}}),s=(0,i.eI)({url:`${{"https:":"wss:"}[location.protocol]||"ws:"}//${location.host}${location.pathname}subscriptions`})},7812:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var n=r(2784),i=r(7598),o=r(5163),s=r(3919),l=r(124),u=(0,r(5589).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),c=r(7990),a=r(4831),h=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,o.ZT)(t,e),t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new u},t.prototype.next=function(e){var t=this;(0,a.x)((function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=(0,o.XA)(t.currentObservers),s=i.next();!s.done;s=i.next())s.value.next(e)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},t.prototype.error=function(e){var t=this;(0,a.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,a.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?l.Lc:(this.currentObservers=null,o.push(e),new l.w0((function(){t.currentObservers=null,(0,c.P)(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;r?e.error(n):i&&e.complete()},t.prototype.asObservable=function(){var e=new s.y;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(s.y),d=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return(0,o.ZT)(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:l.Lc},t}(h),f=r(7984),p=r(9676),v=r(1118),b=r(7394);function y(e,t){return e===t}var m=function(e){function t(t,r){return e.call(this)||this}return(0,o.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(l.w0),w={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=w.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,(0,o.ev)([e,t],(0,o.CR)(r))):setInterval.apply(void 0,(0,o.ev)([e,t],(0,o.CR)(r)))},clearInterval:function(e){var t=w.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},g=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return(0,o.ZT)(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),w.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&w.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,c.P)(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(m),S={now:function(){return(S.delegate||Date).now()},delegate:void 0},_=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=S.now,e}(),E=new(function(e){function t(t,r){void 0===r&&(r=_.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return(0,o.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(_))(g),I=r(6647),x=r(9082),A=r(6899);const C=I.gql`
  query {
    movies
  }
`,k=new class extends class{client=x.L;subscriptions=x.V}{getMovies(){return(0,i.D)(this.client.request(C))}};function O({filters:e,setFilters:t}){return n.createElement("fieldset",null,n.createElement("label",null,n.createElement("span",null,"Search"),n.createElement("input",{type:"search",value:e.search,onChange:(0,n.useCallback)((({target:e})=>t((t=>({...t,search:e.value})))),[])})))}function T({movies:e}){return n.createElement("div",null,n.createElement("pre",null,JSON.stringify(e,null,2)))}function q(){const[{movies:e}]=function(){const[e,t]=(0,n.useState)((()=>null));return(0,n.useEffect)((()=>{k.getMovies().subscribe((e=>t(e)))}),[]),[{movies:e}]}(),[t,r]=(0,n.useState)((()=>({search:""}))),[i,o]=(0,n.useState)((()=>t)),s=(0,n.useMemo)((()=>new h),[]);return(0,n.useEffect)((()=>{const e=s.pipe((0,f.U)((({search:e,...t})=>JSON.stringify({...i,...t,search:e.toLowerCase().trim()}))),(void 0===n&&(n=p.y),r=null!=r?r:y,(0,v.e)((function(e,t){var i,o=!0;e.subscribe((0,b.x)(t,(function(e){var s=n(e);!o&&r(i,s)||(o=!1,i=s,t.next(e))})))}))),(400,void 0===t&&(t=E),(0,v.e)((function(e,r){var n=null,i=null,o=null,s=function(){if(n){n.unsubscribe(),n=null;var e=i;i=null,r.next(e)}};function l(){var e=o+400,i=t.now();if(i<e)return n=this.schedule(void 0,e-i),void r.add(n);s()}e.subscribe((0,b.x)(r,(function(e){i=e,o=t.now(),n||(n=t.schedule(l,400),r.add(n))}),(function(){s(),r.complete()}),void 0,(function(){i=n=null})))})))).subscribe((e=>o((t=>({...t,...JSON.parse(e)})))));var t,r,n;return()=>e.unsubscribe()}),[s]),(0,n.useEffect)((()=>{s.next(t)}),[t]),console.log({filters:t,movies:e,queries:i}),n.createElement("section",{className:A.Z.Section},n.createElement("h2",null,"Movies"),n.createElement(O,{filters:t,setFilters:r}),n.createElement(T,{movies:(0,n.useMemo)((()=>e?e.movies.results.filter((e=>""===i.search||e.trackName.toLowerCase().match(i.search))):[]),[e,i])}),n.createElement("a",{href:"https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/index.html",rel:"noopener noreferrer",target:"_blank"},"https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/index.html"))}},9484:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(272),i=r.n(n),o=r(2609),s=r.n(o)()(i());s.push([e.id,".BJTU_JjKaLdFKfqPjVe8{color:purple}","",{version:3,sources:["webpack://./../movies/src/styles.module.scss"],names:[],mappings:"AAAA,sBACE,YAAA",sourcesContent:[".Section {\n  color: purple;\n}\n"],sourceRoot:""}]),s.locals={Section:"BJTU_JjKaLdFKfqPjVe8"};const l=s},7984:(e,t,r)=>{r.d(t,{U:()=>o});var n=r(1118),i=r(7394);function o(e,t){return(0,n.e)((function(r,n){var o=0;r.subscribe((0,i.x)(n,(function(r){n.next(e.call(t,r,o++))})))}))}},6899:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(6062),i=r.n(n),o=r(4036),s=r.n(o),l=r(6793),u=r.n(l),c=r(7892),a=r.n(c),h=r(1173),d=r.n(h),f=r(2464),p=r.n(f),v=r(9484),b={};b.styleTagTransform=p(),b.setAttributes=a(),b.insert=u().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=d();var y=i()(v.default,b);if(!v.default.locals||e.hot.invalidate){var m=!v.default.locals,w=m?v:v.default.locals;e.hot.accept(9484,(t=>{v=r(9484),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(w,m?v:v.default.locals,m)?(w=m?v:v.default.locals,y(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));const g=v.default&&v.default.locals?v.default.locals:void 0}}]);
//# sourceMappingURL=812.js.map