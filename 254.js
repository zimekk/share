"use strict";(self.webpackChunk_dev_app=self.webpackChunk_dev_app||[]).push([[254],{9082:(e,t,n)=>{n.d(t,{L:()=>s,V:()=>l});var r=n(6145),a=n(9385);const s=new r.g6(`${location.pathname}graphql`,{headers:{}}),l=(0,a.eI)({url:`${{"https:":"wss:"}[location.protocol]||"ws:"}//${location.host}${location.pathname}subscriptions`})},2254:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(2784),a=n(7598),s=n(1148),l=n(7984),o=n(9369),i=n(6005),c=n(6145),u=n(9082),A=n(357),f=n(9725);const d=({height:e=100,width:t=100,color:n="green",radius:a=1,label:s="audio-loading"})=>r.createElement("svg",{width:t,height:e,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","aria-label":s},r.createElement("defs",null,r.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},r.createElement("stop",{stopColor:n,stopOpacity:"0",offset:"0%"}),r.createElement("stop",{stopColor:n,stopOpacity:".631",offset:"63.146%"}),r.createElement("stop",{stopColor:n,offset:"100%"}))),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("g",{transform:"translate(1 1)"},r.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:n,strokeWidth:"2"},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),r.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:a},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))));var m=n(2779),h=n.n(m),p=n(3710);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const g=(0,A.k)((async e=>new Promise((t=>{const n=new Image;Object.assign(n,{onload:()=>t(e),onerror:()=>t((({icon:[e,t,,,n]})=>`data:image/svg+xml;utf8,<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="crosshairs" class="svg-inline--fa fa-crosshairs fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${t}"><path fill="currentColor" d="${n}"></path></svg>`)(f.VmB)),src:e})}))));function C({src:e,...t}){const n=g.read(e);return r.createElement("img",v({src:n},t,{referrerPolicy:"no-referrer"}))}function w(){return r.createElement("div",{className:p.Z.Loader},r.createElement(d,null))}function E({className:e,src:t}){const[n,a]=(0,r.useState)(!1),s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=([{isIntersecting:e}])=>{e&&a(!0)};if(s.current instanceof HTMLElement){const t=new IntersectionObserver(e,{root:null,rootMargin:"0px",threshold:1});return t.observe(s.current),()=>{s.current&&t.unobserve(s.current)}}}),[s]),r.createElement("div",{ref:s,className:h()(e,p.Z.Artwork)},n&&r.createElement(r.Suspense,{fallback:r.createElement(w,null)},r.createElement(C,{src:t})))}var b=n(9429);const x=c.Ps`
  query {
    movies
  }
`,y=new class extends class{client=u.L;subscriptions=u.V}{getMovies(){return(0,a.D)(this.client.request(x))}};function S({filters:e,setFilters:t}){return r.createElement("fieldset",null,r.createElement("label",null,r.createElement("span",null,"Search"),r.createElement("input",{type:"search",value:e.search,onChange:(0,r.useCallback)((({target:e})=>t((t=>({...t,search:e.value})))),[])})))}function k({movies:e}){return r.createElement("div",null,e.map((({artistName:e,artworkUrl100:t,trackName:n,trackId:a})=>r.createElement("div",{key:a,className:b.Z.Movie},r.createElement(E,{src:t,className:b.Z.Artwork}),r.createElement("h5",null,n),r.createElement("h6",null,e)))),r.createElement("pre",null,JSON.stringify(e,null,2)))}function B(){const[{movies:e}]=function(){const[e,t]=(0,r.useState)((()=>null));return(0,r.useEffect)((()=>{y.getMovies().subscribe((e=>t(e)))}),[]),[{movies:e}]}(),[t,n]=(0,r.useState)((()=>({search:""}))),[a,c]=(0,r.useState)((()=>t)),u=(0,r.useMemo)((()=>new s.x),[]);return(0,r.useEffect)((()=>{const e=u.pipe((0,l.U)((({search:e,...t})=>JSON.stringify({...a,...t,search:e.toLowerCase().trim()}))),(0,o.x)(),(0,i.b)(400)).subscribe((e=>c((t=>({...t,...JSON.parse(e)})))));return()=>e.unsubscribe()}),[u]),(0,r.useEffect)((()=>{u.next(t)}),[t]),console.log({filters:t,movies:e,queries:a}),r.createElement("section",{className:b.Z.Section},r.createElement("h2",null,"Movies"),r.createElement(S,{filters:t,setFilters:n}),r.createElement(k,{movies:(0,r.useMemo)((()=>e?e.movies.results.filter((e=>""===a.search||e.trackName.toLowerCase().match(a.search))):[]),[e,a])}),r.createElement("a",{href:"https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/index.html",rel:"noopener noreferrer",target:"_blank"},"https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/index.html"))}},2098:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(272),a=n.n(r),s=n(2609),l=n.n(s)()(a());l.push([e.id,".cIS0qf4T1FQ8oVBP5RZQ{position:relative;width:50px;height:50px;overflow:hidden;display:flex}.cIS0qf4T1FQ8oVBP5RZQ img{width:100%;height:100%;object-fit:cover;scroll-snap-align:start}.cIS0qf4T1FQ8oVBP5RZQ .ac29UNTmNLnSwRBeaC1P{width:100%;height:100%}.ac29UNTmNLnSwRBeaC1P{display:flex;align-items:center;justify-content:center}.ac29UNTmNLnSwRBeaC1P svg{flex:none;width:75%;height:75%}","",{version:3,sources:["webpack://./../movies/src/components/Artwork/styles.module.scss"],names:[],mappings:"AAAA,sBACE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,YAAA,CAEA,0BACE,UAAA,CACA,WAAA,CACA,gBAAA,CACA,uBAAA,CAGF,4CACE,UAAA,CACA,WAAA,CAGJ,sBACE,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,0BACE,SAAA,CACA,SAAA,CACA,UAAA",sourcesContent:[".Artwork {\n  position: relative;\n  width: 50px;\n  height: 50px;\n  overflow: hidden;\n  display: flex;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    scroll-snap-align: start;\n  }\n\n  .Loader {\n    width: 100%;\n    height: 100%;\n  }\n}\n.Loader {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  svg {\n    flex: none;\n    width: 75%;\n    height: 75%;\n  }\n}\n"],sourceRoot:""}]),l.locals={Artwork:"cIS0qf4T1FQ8oVBP5RZQ",Loader:"ac29UNTmNLnSwRBeaC1P"};const o=l},5476:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(272),a=n.n(r),s=n(2609),l=n.n(s)()(a());l.push([e.id,".GCyQ9Pj8anen_Ukf2JOx{color:purple}.cwxNsVSith4Bxmg_UD0w{clear:both;padding:.25em}.cwxNsVSith4Bxmg_UD0w h5,.cwxNsVSith4Bxmg_UD0w h6{margin:0}.cwxNsVSith4Bxmg_UD0w .dYFRMhq74n5Yoxh2_l66{float:left;padding-right:.25em}","",{version:3,sources:["webpack://./../movies/src/containers/Movies/styles.module.scss"],names:[],mappings:"AAAA,sBACE,YAAA,CAEF,sBACE,UAAA,CACA,aAAA,CAEA,kDAEE,QAAA,CAGF,4CACE,UAAA,CACA,mBAAA",sourcesContent:[".Section {\n  color: purple;\n}\n.Movie {\n  clear: both;\n  padding: 0.25em;\n\n  h5,\n  h6 {\n    margin: 0;\n  }\n\n  .Artwork {\n    float: left;\n    padding-right: 0.25em;\n  }\n}\n"],sourceRoot:""}]),l.locals={Section:"GCyQ9Pj8anen_Ukf2JOx",Movie:"cwxNsVSith4Bxmg_UD0w",Artwork:"dYFRMhq74n5Yoxh2_l66"};const o=l},3710:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6062),a=n.n(r),s=n(4036),l=n.n(s),o=n(6793),i=n.n(o),c=n(7892),u=n.n(c),A=n(1173),f=n.n(A),d=n(2464),m=n.n(d),h=n(2098),p={};p.styleTagTransform=m(),p.setAttributes=u(),p.insert=i().bind(null,"head"),p.domAPI=l(),p.insertStyleElement=f();var v=a()(h.default,p);if(!h.default.locals||e.hot.invalidate){var g=!h.default.locals,C=g?h:h.default.locals;e.hot.accept(2098,(t=>{h=n(2098),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(C,g?h:h.default.locals,g)?(C=g?h:h.default.locals,v(h.default)):e.hot.invalidate()}))}e.hot.dispose((function(){v()}));const w=h.default&&h.default.locals?h.default.locals:void 0},9429:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6062),a=n.n(r),s=n(4036),l=n.n(s),o=n(6793),i=n.n(o),c=n(7892),u=n.n(c),A=n(1173),f=n.n(A),d=n(2464),m=n.n(d),h=n(5476),p={};p.styleTagTransform=m(),p.setAttributes=u(),p.insert=i().bind(null,"head"),p.domAPI=l(),p.insertStyleElement=f();var v=a()(h.default,p);if(!h.default.locals||e.hot.invalidate){var g=!h.default.locals,C=g?h:h.default.locals;e.hot.accept(5476,(t=>{h=n(5476),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(C,g?h:h.default.locals,g)?(C=g?h:h.default.locals,v(h.default)):e.hot.invalidate()}))}e.hot.dispose((function(){v()}));const w=h.default&&h.default.locals?h.default.locals:void 0}}]);
//# sourceMappingURL=254.js.map