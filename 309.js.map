{"version":3,"file":"309.js","mappings":"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","sources":["webpack://@dev/app/../client/src/index.ts","webpack://@dev/app/../talks/src/containers/Messages.tsx","webpack://@dev/app/../talks/src/index.tsx","webpack://@dev/app/../talks/src/services/Service.ts","webpack://@dev/app/../talks/src/services/BrowserService.ts","webpack://@dev/app/../talks/src/services/HelloService.ts","webpack://@dev/app/../talks/src/services/MessagesService.ts","webpack://@dev/app/../talks/src/services/SensorService.ts","webpack://@dev/app/../talks/src/services/VideoService.ts","webpack://@dev/app/../talks/src/services/RemoteService.ts","webpack://@dev/app/../talks/src/services/index.ts","webpack://@dev/app/../talks/src/containers/Messages.module.scss","webpack://@dev/app/../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://@dev/app/../talks/src/containers/Messages.module.scss?b013"],"sourcesContent":["import { GraphQLClient } from \"graphql-request\";\nimport { createClient } from \"graphql-ws\";\n\n// https://shammelburg.medium.com/subscriptions-with-graphql-dfa8279af050\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\nexport const client = new GraphQLClient(`${location.pathname}graphql`, {\n  headers: {\n    // authorization: `Bearer ${localStorage.getItem('token')}`,\n  },\n});\n\nexport const subscriptions = createClient({\n  url: `${{ \"https:\": \"wss:\" }[location.protocol] || \"ws:\"}//${location.host}${\n    location.pathname\n  }subscriptions`,\n});\n","import React, { useState } from \"react\";\nimport { useMessages } from \"../services\";\nimport styles from \"./Messages.module.scss\";\n\n// https://dev.to/dsckiitdev/build-a-chat-app-with-graphql-subscriptions-typescript-part-3-30dd\nexport default function Messages() {\n  const [{ messages }, { sendMessage }] = useMessages();\n  const [text, setText] = useState(\"\");\n  const uuid = null;\n\n  const handleChangeText = (e) => {\n    const { value: text } = e.target;\n    setText(text);\n  };\n\n  const handleKeyDown = (e) =>\n    e.key === \"Enter\" &&\n    !e.shiftKey &&\n    (e.preventDefault(), handleSendMessage());\n\n  const handleSendMessage = () => {\n    setText(\"\");\n    sendMessage({ uuid, text });\n  };\n\n  return (\n    <div className={styles.Messages}>\n      <span>{uuid}</span>\n      <input\n        value={text}\n        onChange={handleChangeText}\n        onKeyDown={handleKeyDown}\n      />\n      <button onClick={handleSendMessage}>send</button>\n      {messages && (\n        <div>\n          <pre>\n            {messages.map(({ uuid, text }) => `[${uuid}] ${text}`).join(\"\\n\")}\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Messages from \"./containers/Messages\";\n\nexport default function Section() {\n  return <Messages />;\n}\n","import { client, subscriptions } from \"@dev/client\";\n\nexport class Service {\n  client = client;\n  subscriptions = subscriptions;\n}\n","import { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst FILES = gql`\n  query {\n    files {\n      name\n    }\n  }\n`;\n\nexport class BrowserService extends Service {\n  files() {\n    return from(this.client.request(FILES));\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst HELLO = gql`\n  query {\n    hello\n  }\n`;\n\nexport class HelloService extends Service {\n  hello() {\n    return from(this.client.request(HELLO));\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst MESSAGES = gql`\n  query MessagesQuery {\n    messages {\n      uuid\n      text\n    }\n  }\n`;\n\nconst ON_MESSAGE = gql`\n  subscription MessageSubscription {\n    message {\n      uuid\n      text\n    }\n  }\n`;\n\nconst SEND_MESSAGE = gql`\n  mutation SendMessageMutation($message: MessageInput) {\n    sendMessage(message: $message)\n  }\n`;\n\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\n// https://codesandbox.io/s/push-based-react-lab-3-vc8d6?file=/src/users/state/users.service.ts\n// https://jasonwatmore.com/post/2020/04/21/react-hooks-rxjs-communicating-between-components-with-observable-subject\nexport class MessagesService extends Service {\n  getMessages() {\n    return from(this.client.request(MESSAGES));\n  }\n  sendMessage(message) {\n    return from(this.client.request(SEND_MESSAGE, { message }));\n  }\n  onMessage() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_MESSAGE },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst ON_SENSOR = gql`\n  subscription SensorSubscription {\n    sensor {\n      data\n    }\n  }\n`;\n\nexport class SensorService extends Service {\n  onSensor() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_SENSOR },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst ON_SIGNAL = gql`\n  subscription SignalSubscription {\n    signal {\n      sdp\n      type\n      candidate {\n        candidate\n        sdpMLineIndex\n        sdpMid\n      }\n    }\n  }\n`;\n\nconst SEND_SIGNAL = gql`\n  mutation SendSignalMutation($signal: SignalInput) {\n    sendSignal(signal: $signal)\n  }\n`;\n\nexport class VideoService extends Service {\n  sendSignal(signal) {\n    return from(this.client.request(SEND_SIGNAL, { signal }));\n  }\n  onSignal() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_SIGNAL },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { Service } from \"./Service\";\n\nconst GET_DEVICES = gql`\n  query GetDevicesQuery {\n    devices {\n      data\n    }\n  }\n`;\n\nconst GET_VERSION = gql`\n  query GetVersionQuery($location: String) {\n    version(location: $location)\n  }\n`;\n\nconst REMOTE_RCU = gql`\n  query RemoteRcuQuery($location: String, $key: String) {\n    remoteRcu(location: $location, key: $key) {\n      data\n    }\n  }\n`;\n\nconst REMOTE_TV = gql`\n  query RemoteTvQuery($location: String, $action: String) {\n    remoteTv(location: $location, action: $action) {\n      data\n    }\n  }\n`;\n\nconst REMOTE_VCR = gql`\n  query RemoteVcrQuery($location: String, $action: String) {\n    remoteVcr(location: $location, action: $action) {\n      data\n    }\n  }\n`;\n\nconst ON_REMOTE = gql`\n  subscription RemoteSubscription {\n    remote {\n      data\n    }\n  }\n`;\n\nconst SEND_REMOTE = gql`\n  mutation SendRemoteMutation($remote: RemoteInput) {\n    sendRemote(remote: $remote)\n  }\n`;\n\ntype RcuKey = \"KeyStandBy\" | \"KeyVolumeDown\" | \"KeyVolumeUp\";\n\nexport class RemoteService extends Service {\n  getDevices() {\n    return from(this.client.request(GET_DEVICES)).pipe(\n      map(({ devices }) => devices)\n    );\n  }\n  getStatusAdb(location: string) {\n    return from(this.client.request(GET_VERSION, { location })).pipe(\n      map(({ version }) => version)\n    );\n  }\n  getRemoteRcu(location: string, key: RcuKey) {\n    return from(this.client.request(REMOTE_RCU, { location, key }));\n  }\n  getRemoteTv(location: string, action: string) {\n    return from(this.client.request(REMOTE_TV, { location, action }));\n  }\n  getRemoteVcr(location: string, action: string) {\n    return from(this.client.request(REMOTE_VCR, { location, action }));\n  }\n  sendMessage(data) {\n    return from(this.client.request(SEND_REMOTE, { data }));\n  }\n  onMessage() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_REMOTE },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data.remote),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport { BrowserService } from \"./BrowserService\";\nimport { HelloService } from \"./HelloService\";\nimport { MessagesService } from \"./MessagesService\";\nimport { SensorService } from \"./SensorService\";\nimport { VideoService } from \"./VideoService\";\n\nexport * from \"./RemoteService\";\n\nconst helloService = new HelloService();\n\nexport function useHello() {\n  const [state, setState] = useState({ hello: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      helloService\n        .hello()\n        .subscribe(({ hello }) => setState((state) => ({ ...state, hello }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state];\n}\n\nconst messageService = new MessagesService();\n\n// https://codesandbox.io/s/push-based-react-lab-3-vc8d6?file=/src/users/hooks/users.hook.ts\nexport function useMessages() {\n  const [{ messages }, setState] = useState(() => ({\n    messages: null,\n  }));\n\n  useEffect(() => {\n    const subscriptions = [\n      messageService\n        .getMessages()\n        .subscribe(({ messages }) =>\n          setState((state) => ({ ...state, messages }))\n        ),\n      messageService.onMessage().subscribe(({ message }) =>\n        setState(({ messages, ...state }) => ({\n          ...state,\n          messages: messages.concat([message]),\n        }))\n      ),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [\n    { messages },\n    { sendMessage: (message) => messageService.sendMessage(message) },\n  ];\n}\n\nconst sensorService = new SensorService();\n\nexport function useSensor() {\n  const [{ values }, setState] = useState(() => ({\n    values: null,\n  }));\n\n  useEffect(() => {\n    const subscriptions = [\n      sensorService.onSensor().subscribe(({ sensor }) =>\n        setState(({ values, ...state }) => ({\n          ...state,\n          values: (values || []).concat([sensor]),\n        }))\n      ),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [{ values }, {}];\n}\n\nconst videoService = new VideoService();\n\nexport function useVideo() {\n  const [state, setState] = useState({ hello: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      videoService\n        .onSignal()\n        .subscribe(({ signal }) => setState((state) => ({ ...state, signal }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state, { sendSignal: (signal) => videoService.sendSignal(signal) }];\n}\n\nconst browserService = new BrowserService();\n\nexport function useFiles() {\n  const [state, setState] = useState({ files: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      browserService\n        .files()\n        .subscribe(({ files }) => setState((state) => ({ ...state, files }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state];\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".m68TYmnEHWUbsyOJQ9lS{color:orange}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../talks/src/containers/Messages.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA\",\"sourcesContent\":[\".Messages {\\n  color: orange;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Messages\": \"m68TYmnEHWUbsyOJQ9lS\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Messages.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Messages.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./Messages.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["client","GraphQLClient","location","pathname","headers","subscriptions","createClient","url","protocol","host","Messages","messages","sendMessage","useMessages","text","setText","useState","handleSendMessage","uuid","className","styles","value","onChange","e","target","onKeyDown","key","shiftKey","preventDefault","onClick","map","join","Section","Service","FILES","gql","HELLO","MESSAGES","ON_MESSAGE","SEND_MESSAGE","ON_SENSOR","ON_SIGNAL","SEND_SIGNAL","GET_DEVICES","GET_VERSION","REMOTE_RCU","REMOTE_TV","REMOTE_VCR","ON_REMOTE","SEND_REMOTE","RemoteService","getDevices","from","this","request","pipe","devices","getStatusAdb","version","getRemoteRcu","getRemoteTv","action","getRemoteVcr","data","onMessage","Observable","observer","subscribe","query","next","errors","error","remote","complete","helloService","hello","useHello","state","setState","useEffect","it","unsubscribe","messageService","getMessages","message","concat","sensorService","onSensor","useSensor","values","sensor","videoService","sendSignal","signal","onSignal","useVideo","browserService","files","useFiles","___CSS_LOADER_EXPORT___","push","module","id","locals","project","thisArg","source","subscriber","index","call","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","update","hot","invalidate","isNamedExport","oldLocals","accept","a","b","p","isEqualLocals","dispose","undefined"],"sourceRoot":""}