"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[124],{3124:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var i=r(2784),s=r(5163),n=(r(2556),r(8229)),o=r(2653),u=r(2086),a=r(1215),l=function(e){function t(t){var r=t.options,i=t.context,s=t.onNewData,n=e.call(this,r,i)||this;return n.runLazy=!1,n.previous=Object.create(null),n.runLazyQuery=function(e){n.cleanup(),n.runLazy=!0,n.lazyOptions=e,n.onNewData()},n.obsRefetch=function(e){var t;return null===(t=n.currentObservable)||void 0===t?void 0:t.refetch(e)},n.obsFetchMore=function(e){var t;return null===(t=n.currentObservable)||void 0===t?void 0:t.fetchMore(e)},n.obsUpdateQuery=function(e){var t;return null===(t=n.currentObservable)||void 0===t?void 0:t.updateQuery(e)},n.obsStartPolling=function(e){var t;null===(t=n.currentObservable)||void 0===t||t.startPolling(e)},n.obsStopPolling=function(){var e;null===(e=n.currentObservable)||void 0===e||e.stopPolling()},n.obsSubscribeToMore=function(e){var t;return null===(t=n.currentObservable)||void 0===t?void 0:t.subscribeToMore(e)},n.onNewData=s,n}return(0,s.ZT)(t,e),t.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,r=e.query;return(t||r!==this.previous.query)&&(this.removeQuerySubscription(),this.removeObservable(!t),this.previous.query=r),this.updateObservableQuery(),this.getExecuteSsrResult()||this.getExecuteResult()},t.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:u.I.ready,called:!1,data:void 0}]},t.prototype.fetchData=function(){var e=this,t=this.getOptions();return!t.skip&&!1!==t.ssr&&new Promise((function(t){return e.startQuerySubscription(t)}))},t.prototype.afterExecute=function(e){var t=(void 0===e?{}:e).lazy,r=void 0!==t&&t;this.isMounted=!0;var i=this.getOptions();return this.currentObservable&&!this.ssrInitiated()&&this.startQuerySubscription(),r&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=i,this.unmount.bind(this)},t.prototype.cleanup=function(){this.removeQuerySubscription(),this.removeObservable(!0),delete this.previous.result},t.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this);return this.lazyOptions&&(t.variables=(0,s.pi)((0,s.pi)({},t.variables),this.lazyOptions.variables),t.context=(0,s.pi)((0,s.pi)({},t.context),this.lazyOptions.context)),this.runLazy&&delete t.skip,t},t.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},t.prototype.getExecuteSsrResult=function(){var e=this.getOptions(),t=e.ssr,r=e.skip,i=!1===t,n=this.refreshClient().client.disableNetworkFetches,o=(0,s.pi)({loading:!0,networkStatus:u.I.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());if(i&&(this.ssrInitiated()||n))return this.previous.result=o,o;if(this.ssrInitiated()){var a=this.getExecuteResult()||o;return a.loading&&!r&&this.context.renderPromises.addQueryPromise(this,(function(){return null})),a}},t.prototype.prepareObservableQueryOptions=function(){var e=this.getOptions();this.verifyDocumentType(e.query,a.n_.Query);var t=e.displayName||"Query";return!this.ssrInitiated()||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e.fetchPolicy="cache-first"),(0,s.pi)((0,s.pi)({},e),{displayName:t,context:e.context})},t.prototype.initializeObservableQuery=function(){if(this.ssrInitiated()&&(this.currentObservable=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable){var e=this.prepareObservableQueryOptions();this.previous.observableQueryOptions=(0,s.pi)((0,s.pi)({},e),{children:void 0}),this.currentObservable=this.refreshClient().client.watchQuery((0,s.pi)({},e)),this.ssrInitiated()&&this.context.renderPromises.registerSSRObservable(this.currentObservable,e)}},t.prototype.updateObservableQuery=function(){if(this.currentObservable){var e=(0,s.pi)((0,s.pi)({},this.prepareObservableQueryOptions()),{children:void 0});this.getOptions().skip?this.previous.observableQueryOptions=e:(0,n.D)(e,this.previous.observableQueryOptions)||(this.previous.observableQueryOptions=e,this.currentObservable.setOptions(e).catch((function(){})))}else this.initializeObservableQuery()},t.prototype.startQuerySubscription=function(e){var t=this;void 0===e&&(e=this.onNewData),this.currentSubscription||this.getOptions().skip||(this.currentSubscription=this.currentObservable.subscribe({next:function(r){var i=r.loading,s=r.networkStatus,o=r.data,u=t.previous.result;u&&u.loading===i&&u.networkStatus===s&&(0,n.D)(u.data,o)||e()},error:function(r){if(t.resubscribeToQuery(),!r.hasOwnProperty("graphQLErrors"))throw r;var i=t.previous.result;(i&&i.loading||!(0,n.D)(r,t.previous.error))&&(t.previous.error=r,e())}}))},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable;if(e){var t=e.last;try{e.resetLastResults(),this.startQuerySubscription()}finally{e.last=t}}},t.prototype.getExecuteResult=function(){var e=this.observableQueryFields(),t=this.getOptions();if(t.skip)e=(0,s.pi)((0,s.pi)({},e),{data:void 0,error:void 0,loading:!1,networkStatus:u.I.ready,called:!0});else if(this.currentObservable){var r=this.currentObservable.getCurrentResult(),i=r.data,n=r.loading,a=r.partial,l=r.networkStatus,c=r.errors,p=r.error;if(c&&c.length>0&&(p=new o.c({graphQLErrors:c})),e=(0,s.pi)((0,s.pi)({},e),{data:i,loading:n,networkStatus:l,error:p,called:!0}),n);else if(p)Object.assign(e,{data:(this.currentObservable.getLastResult()||{}).data});else{var h=this.currentObservable.options.fetchPolicy;if(t.partialRefetch&&a&&(!i||0===Object.keys(i).length)&&"cache-only"!==h)return Object.assign(e,{loading:!0,networkStatus:u.I.loading}),e.refetch(),e}}e.client=this.client,this.setOptions(t,!0);var v=this.previous.result;return this.previous.loading=v&&v.loading||!1,e.previousData=v&&(v.data||v.previousData),this.previous.result=e,this.currentObservable&&this.currentObservable.resetQueryStoreErrors(),e},t.prototype.handleErrorOrCompleted=function(){if(this.currentObservable&&this.previous.result){var e=this.previous.result,t=e.data,r=e.loading,i=e.error;if(!r){var s=this.getOptions(),o=s.query,u=s.variables,a=s.onCompleted,l=s.onError,c=s.skip;if(this.previousOptions&&!this.previous.loading&&(0,n.D)(this.previousOptions.query,o)&&(0,n.D)(this.previousOptions.variables,u))return;!a||i||c?l&&i&&l(i):a(t)}}},t.prototype.removeQuerySubscription=function(){this.currentSubscription&&(this.currentSubscription.unsubscribe(),delete this.currentSubscription)},t.prototype.removeObservable=function(e){this.currentObservable&&(this.currentObservable.tearDownQuery(),e&&delete this.currentObservable)},t.prototype.observableQueryFields=function(){var e;return{variables:null===(e=this.currentObservable)||void 0===e?void 0:e.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}},t}(r(6201).V),c=r(6505),p=r(1707);var h=r(5228),v=r(3549);const b=h.Ps`
  query {
    hello
  }
`;function d(){const{data:e,error:t,loading:r}=function(e,t,r){void 0===r&&(r=!1);var o=(0,i.useContext)((0,c.K)()),u=(0,i.useReducer)((function(e){return e+1}),0),a=u[0],h=u[1],v=t?(0,s.pi)((0,s.pi)({},t),{query:e}):{query:e},b=(0,i.useRef)(),d=b.current||(b.current=new l({options:v,context:o,onNewData:function(){d.ssrInitiated()?h():Promise.resolve().then((function(){return b.current&&b.current.isMounted&&h()}))}}));d.setOptions(v),d.context=o;var f,y,O,g=(f=function(){return r?d.executeLazy():d.execute()},y={options:(0,s.pi)((0,s.pi)({},v),{onError:void 0,onCompleted:void 0}),context:o,tick:a},(O=(0,i.useRef)()).current&&(0,n.D)(y,O.current.key)||(O.current={key:y,value:f()}),O.current.value),Q=r?g[1]:g;return __DEV__&&(0,p.j)(h),(0,i.useEffect)((function(){return function(){d.cleanup(),b.current=void 0}}),[]),(0,i.useEffect)((function(){return d.afterExecute({lazy:r})}),[Q.loading,Q.networkStatus,Q.error,Q.data,d.currentObservable]),g}(b,undefined,!1);return r?"Loading...":t?`Error! ${t.message}`:i.createElement("h2",{className:v.Z.Hello},e.hello)}},1051:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var i=r(2609),s=r.n(i)()((function(e){return e[1]}));s.push([e.id,".PfVEl6_LqTror7BKSq5r{color:blue}",""]),s.locals={Hello:"PfVEl6_LqTror7BKSq5r"};const n=s},3549:(e,t,r)=>{r.d(t,{Z:()=>Q});var i=r(6062),s=r.n(i),n=r(4036),o=r.n(n),u=r(6793),a=r.n(u),l=r(7892),c=r.n(l),p=r(1173),h=r.n(p),v=r(2464),b=r.n(v),d=r(1051),f={};f.styleTagTransform=b(),f.setAttributes=c(),f.insert=a().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h();var y=s()(d.default,f);if(!d.default.locals||e.hot.invalidate){var O=!d.default.locals,g=O?d:d.default.locals;e.hot.accept(1051,(t=>{d=r(1051),function(e,t,r){if(!e&&t||e&&!t)return!1;var i;for(i in e)if((!r||"default"!==i)&&e[i]!==t[i])return!1;for(i in t)if(!(r&&"default"===i||e[i]))return!1;return!0}(g,O?d:d.default.locals,O)?(g=O?d:d.default.locals,y(d.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));const Q=d.default&&d.default.locals?d.default.locals:void 0}}]);