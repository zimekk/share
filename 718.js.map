{"version":3,"file":"718.js","mappings":"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","sources":["webpack://@dev/app/../client/src/index.ts","webpack://@dev/app/../lan/src/containers/index.tsx","webpack://@dev/app/../lan/src/containers/styles.module.scss","webpack://@dev/app/../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://@dev/app/../lan/src/containers/styles.module.scss?eb04"],"sourcesContent":["import { GraphQLClient } from \"graphql-request\";\nimport { createClient } from \"graphql-ws\";\n\n// https://shammelburg.medium.com/subscriptions-with-graphql-dfa8279af050\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\nexport const client = new GraphQLClient(`${location.pathname}graphql`, {\n  headers: {\n    // authorization: `Bearer ${localStorage.getItem('token')}`,\n  },\n});\n\nexport const subscriptions = createClient({\n  url: `${{ \"https:\": \"wss:\" }[location.protocol] || \"ws:\"}//${location.host}${\n    location.pathname\n  }subscriptions`,\n});\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { client, subscriptions } from \"@dev/client\";\nimport styles from \"./styles.module.scss\";\n\nimport type { WiFiNetwork } from \"node-wifi\";\n\nclass Service {\n  client = client;\n  subscriptions = subscriptions;\n}\n\nconst SCAN = gql`\n  query ScanQuery {\n    lan {\n      scan\n    }\n  }\n`;\n\nconst GET_CURRENT_CONNECTIONS = gql`\n  query GetCurrentConnectionsQuery {\n    lan {\n      currentConnections\n    }\n  }\n`;\n\nexport class LanService extends Service {\n  scan() {\n    return from(this.client.request(SCAN)).pipe(\n      map(({ lan: { scan } }) => scan)\n    );\n  }\n  getCurrentConnections() {\n    return from(this.client.request(GET_CURRENT_CONNECTIONS)).pipe(\n      map(({ lan: { currentConnections } }) => currentConnections)\n    );\n  }\n}\n\nconst service = new LanService();\n\nexport function useService() {\n  const [data, setData] = useState<WiFiNetwork[] | null>(() => []);\n\n  useEffect(() => {\n    service.getCurrentConnections().subscribe((data) => setData(data));\n  }, []);\n\n  return {\n    data,\n    scan: useCallback(\n      () => service.scan().subscribe((data) => setData(data)),\n      []\n    ),\n  };\n}\n\nexport default function Section() {\n  const { data, scan } = useService();\n\n  return (\n    <div className={styles.Section}>\n      <h2>Lan</h2>\n      {data && (\n        <table>\n          <tbody>\n            <tr>\n              <th>ssid</th>\n              <th>mac</th>\n              <th>channel</th>\n              <th>signal_level</th>\n              <th>quality</th>\n              <th>security</th>\n            </tr>\n            {data.map((item, key) => (\n              <tr key={key}>\n                <td>{item.ssid}</td>\n                <td>{item.mac}</td>\n                <td>{item.channel}</td>\n                <td>{item.signal_level}</td>\n                <td>{item.quality}</td>\n                <td>{item.security}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n      <button onClick={() => scan()}>scan</button>\n      <pre>{JSON.stringify(data, null, 2)}</pre>\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".jnL5aDk4hheBE_J1TFdb{color:green}.jnL5aDk4hheBE_J1TFdb table{border-collapse:collapse;width:100%}.jnL5aDk4hheBE_J1TFdb th,.jnL5aDk4hheBE_J1TFdb td{padding:.25em;text-align:left}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../lan/src/containers/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,WAAA,CAEA,4BACE,wBAAA,CACA,UAAA,CAEF,kDAEE,aAAA,CACA,eAAA\",\"sourcesContent\":[\".Section {\\n  color: green;\\n\\n  table {\\n    border-collapse: collapse;\\n    width: 100%;\\n  }\\n  th,\\n  td {\\n    padding: 0.25em;\\n    text-align: left;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"jnL5aDk4hheBE_J1TFdb\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n  var p;\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (!a[p]) {\n      return false;\n    }\n  }\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["client","GraphQLClient","location","pathname","headers","subscriptions","createClient","url","protocol","host","Service","SCAN","gql","GET_CURRENT_CONNECTIONS","service","scan","from","this","request","pipe","map","lan","getCurrentConnections","currentConnections","Section","data","setData","useState","useEffect","subscribe","useCallback","useService","React","className","styles","item","key","ssid","mac","channel","signal_level","quality","security","onClick","JSON","stringify","___CSS_LOADER_EXPORT___","push","module","id","locals","project","thisArg","source","subscriber","index","value","next","call","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","update","hot","invalidate","isNamedExport","oldLocals","accept","a","b","p","isEqualLocals","dispose","undefined"],"sourceRoot":""}