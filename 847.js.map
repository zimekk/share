{"version":3,"file":"847.js","mappings":"oJAKO,MAAMA,EAAS,IAAIC,EAAAA,cAAe,GAAEC,SAASC,kBAAmB,CACrEC,QAAS,KAKEC,GAAgBC,EAAAA,EAAAA,IAAa,CACxCC,IAAM,GAAE,CAAE,SAAU,QAASL,SAASM,WAAa,UAAUN,SAASO,OACpEP,SAASC,2B,0HCXN,MAAMO,EACXV,OAASA,EAAAA,EACTK,cAAgBA,EAAAA,ECAlB,MAAMM,EAAQC,EAAAA,GAAI;;;;;;ECAZC,EAAQD,EAAAA,GAAI;;;;gBCAlB,MAAME,EAAWF,EAAAA,GAAI;;;;;;;EASfG,EAAaH,EAAAA,GAAI;;;;;;;EASjBI,EAAeJ,EAAAA,GAAI;;;;EClBnBK,EAAYL,EAAAA,GAAI;;;;;;ECAhBM,EAAYN,EAAAA,GAAI;;;;;;;;;;;;EAchBO,EAAcP,EAAAA,GAAI;;;;gBCbxB,MAAMQ,EAAcR,EAAAA,GAAI;;;;;;EAQlBS,EAAcT,EAAAA,GAAI;;;;EAMlBU,EAAaV,EAAAA,GAAI;;;;;;EAQjBW,EAAYX,EAAAA,GAAI;;;;;;EAQhBY,EAAaZ,EAAAA,GAAI;;;;;;EAQjBa,EAAYb,EAAAA,GAAI;;;;;;EAQhBc,EAAcd,EAAAA,GAAI;;;;EAQjB,MAAMe,UAAsBjB,EACjCkB,aACE,OAAOC,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQX,IAAcY,MAC5CC,EAAAA,EAAAA,IAAI,EAAGC,QAAAA,KAAcA,KAGzBC,aAAajC,GACX,OAAO2B,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQV,EAAa,CAAEnB,SAAAA,KAAa8B,MAC1DC,EAAAA,EAAAA,IAAI,EAAGG,QAAAA,KAAcA,KAGzBC,aAAanC,EAAkBoC,GAC7B,OAAOT,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQT,EAAY,CAAEpB,SAAAA,EAAUoC,IAAAA,KAE1DC,YAAYrC,EAAkBsC,GAC5B,OAAOX,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQR,EAAW,CAAErB,SAAAA,EAAUsC,OAAAA,KAEzDC,aAAavC,EAAkBsC,GAC7B,OAAOX,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQP,EAAY,CAAEtB,SAAAA,EAAUsC,OAAAA,KAE1DE,YAAYC,GACV,OAAOd,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQL,EAAa,CAAEiB,KAAAA,KAEjDC,YACE,OAAO,IAAIC,EAAAA,GAAYC,GACrBhB,KAAKzB,cAAc0C,UACjB,CAAEC,MAAOvB,GACT,CACEwB,KAAM,EAAGN,KAAAA,EAAMO,OAAAA,KACbA,EAASJ,EAASK,MAAMD,EAAO,IAAMJ,EAASG,KAAKN,EAAKS,QAC1DD,MAAQA,GAAUL,EAASK,MAAMA,GACjCE,SAAU,IAAMP,EAASO,gBCjFnC,MAAMC,EAAe,ILCd,cAA2B5C,EAChC6C,QACE,OAAO1B,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQlB,MKD7B,SAAS2C,IACd,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,CAAEJ,MAAO,OAa5C,OAXAK,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpBiD,EACGC,QACAR,WAAU,EAAGQ,MAAAA,KAAYG,GAAUD,IAAD,IAAiBA,EAAOF,MAAAA,SAE/D,MAAO,KACLlD,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CAACL,GAGV,MAAMM,EAAiB,IJGhB,cAA8BrD,EACnCsD,cACE,OAAOnC,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQjB,IAElC4B,YAAYuB,GACV,OAAOpC,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQf,EAAc,CAAEiD,QAAAA,KAElDrB,YACE,OAAO,IAAIC,EAAAA,GAAYC,GACrBhB,KAAKzB,cAAc0C,UACjB,CAAEC,MAAOjC,GACT,CACEkC,KAAM,EAAGN,KAAAA,EAAMO,OAAAA,KACbA,EAASJ,EAASK,MAAMD,EAAO,IAAMJ,EAASG,KAAKN,GACrDQ,MAAQA,GAAUL,EAASK,MAAMA,GACjCE,SAAU,IAAMP,EAASO,iBIf5B,SAASa,IACd,OAAO,SAAEC,GAAYT,IAAYC,EAAAA,EAAAA,WAAS,KAAM,CAC9CQ,SAAU,SAsBZ,OAnBAP,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpB0D,EACGC,cACAjB,WAAU,EAAGoB,SAAAA,KACZT,GAAUD,IAAD,IAAiBA,EAAOU,SAAAA,QAErCJ,EAAenB,YAAYG,WAAU,EAAGkB,QAAAA,KACtCP,GAAS,EAAGS,SAAAA,KAAaV,MAAhB,IACJA,EACHU,SAAUA,EAASC,OAAO,CAACH,WAIjC,MAAO,KACL5D,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CACL,CAAEK,SAAAA,GACF,CAAEzB,YAAcuB,GAAYF,EAAerB,YAAYuB,KAI3D,MAAMI,EAAgB,IHjDf,cAA4B3D,EACjC4D,WACE,OAAO,IAAIzB,EAAAA,GAAYC,GACrBhB,KAAKzB,cAAc0C,UACjB,CAAEC,MAAO/B,GACT,CACEgC,KAAM,EAAGN,KAAAA,EAAMO,OAAAA,KACbA,EAASJ,EAASK,MAAMD,EAAO,IAAMJ,EAASG,KAAKN,GACrDQ,MAAQA,GAAUL,EAASK,MAAMA,GACjCE,SAAU,IAAMP,EAASO,iBG0C5B,SAASkB,IACd,OAAO,OAAEC,GAAUd,IAAYC,EAAAA,EAAAA,WAAS,KAAM,CAC5Ca,OAAQ,SAiBV,OAdAZ,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpBgE,EAAcC,WAAWvB,WAAU,EAAG0B,OAAAA,KACpCf,GAAS,EAAGc,OAAAA,KAAWf,MAAd,IACJA,EACHe,QAASA,GAAU,IAAIJ,OAAO,CAACK,WAIrC,MAAO,KACLpE,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CAAC,CAAEU,OAAAA,GAAU,IAGtB,MAAME,EAAe,IF7Dd,cAA2BhE,EAChCiE,WAAWC,GACT,OAAO/C,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQZ,EAAa,CAAEyD,OAAAA,KAEjDC,WACE,OAAO,IAAIhC,EAAAA,GAAYC,GACrBhB,KAAKzB,cAAc0C,UACjB,CAAEC,MAAO9B,GACT,CACE+B,KAAM,EAAGN,KAAAA,EAAMO,OAAAA,KACbA,EAASJ,EAASK,MAAMD,EAAO,IAAMJ,EAASG,KAAKN,GACrDQ,MAAQA,GAAUL,EAASK,MAAMA,GACjCE,SAAU,IAAMP,EAASO,iBEmD5B,SAASyB,IACd,MAAOrB,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,CAAEJ,MAAO,OAa5C,OAXAK,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpBqE,EACGG,WACA9B,WAAU,EAAG6B,OAAAA,KAAalB,GAAUD,IAAD,IAAiBA,EAAOmB,OAAAA,SAEhE,MAAO,KACLvE,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CAACL,EAAO,CAAEkB,WAAaC,GAAWF,EAAaC,WAAWC,KAGnE,MAAMG,EAAiB,IN5FhB,cAA6BrE,EAClCsE,QACE,OAAOnD,EAAAA,EAAAA,GAAKC,KAAK9B,OAAO+B,QAAQpB,MM4F7B,SAASsE,IACd,MAAOxB,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,CAAEqB,MAAO,OAa5C,OAXApB,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpB0E,EACGC,QACAjC,WAAU,EAAGiC,MAAAA,KAAYtB,GAAUD,IAAD,IAAiBA,EAAOuB,MAAAA,SAE/D,MAAO,KACL3E,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CAACL,K,qECtHH,SAASyB,GAAS,SAAEC,IACzB,OACE,2BACE,kCACA,0BACEC,SAASC,EAAAA,EAAAA,cACNC,GAAUH,KACX,KAHJ,aCJNI,eAAeC,EAAItF,EAAW,4BAA6BoC,EAAM,cAC/D,aAAamD,MAAO,GAAE,IAAIC,IAAIxF,GAAUyF,qBAAsB,CAC5DC,OAAQ,OACRC,KAAM,UACNC,KAAO,YAAWxD,IAClBlC,QAAS,CACP,eAAgB,uCAGjB2F,MAAMC,GAAQA,EAAIC,SAClBF,KAAKG,QAAQC,KAGX,SAASC,GAAU,UAAEC,EAAY,GAAd,UAAkBC,EAAlB,OAA6BC,IACrD,MAAOnE,EAASoE,IAAc7C,EAAAA,EAAAA,WAAS,KAAM,OACtC8C,GAAYJ,EAEbK,GAAYrB,EAAAA,EAAAA,cACfC,GAAUiB,EAAOE,GAAU1D,UAAUyD,IACtC,CAACC,IAGGE,GAAYtB,EAAAA,EAAAA,cACfC,GAAUE,EAAIiB,EAAU,eACzB,CAACA,IAGGG,GAAevB,EAAAA,EAAAA,cAClBC,GAAUE,EAAIiB,EAAU,kBACzB,CAACA,IAGGI,GAAaxB,EAAAA,EAAAA,cAChBC,GAAUgB,EAAUG,EAAU,gBAC/B,CAACA,IAGH,OACE,2BACE,iCACA,2BAAMK,KAAKC,UAAUV,EAAW,KAAM,IACtC,gCACE,6CACA,0BAAQjB,QAASsB,GAAjB,WACA,2BAAMI,KAAKC,UAAU3E,EAAS,KAAM,KAEtC,gCACE,uCACA,0BAAQgD,QAASuB,GAAjB,YAEF,gCACE,wCACA,0BAAQvB,QAASwB,GAAjB,YACA,0BAAQxB,QAASyB,GAAjB,aAEF,gCACE,0CACA,0BACEzB,SAASC,EAAAA,EAAAA,cACNC,GAAUE,EAAIiB,EAAU,aACzB,CAACA,KAHL,SAQA,0BAAQrB,QAASyB,GAAjB,c,iPC9DD,SAASG,GAAK,IACnBzG,EADmB,MAEnB0G,EAFmB,OAGnBC,EAHmB,MAInBC,IAEA,OACE,uBACEC,UAAWC,EAAAA,EAAAA,KACXC,IAAK/G,EACL0G,MAAOA,EACPC,OAAQA,EACRC,MAAOA,IAKN,SAASI,GAAS,SAAEC,EAAW,GAAb,SAAiBC,IACxC,MAAOhB,EAAUiB,GAAUF,EAErBG,GAActC,EAAAA,EAAAA,cACjBC,GAAUmC,EAAShB,EAAU,cAC9B,CAACA,IAGGmB,GAAcvC,EAAAA,EAAAA,cACjBC,GAAUmC,EAAShB,EAAU,cAC9B,CAACA,IAGGoB,GAAYxC,EAAAA,EAAAA,cACfC,GAAUmC,EAAShB,EAAU,YAC9B,CAACA,IAGGqB,GAAgBzC,EAAAA,EAAAA,cACnBC,GAAUmC,EAAShB,EAAU,gBAC9B,CAACA,IAGGsB,GAAY1C,EAAAA,EAAAA,cACfC,GAAUmC,EAAShB,EAAU,YAC9B,CAACA,IAGGuB,GAAY3C,EAAAA,EAAAA,cACfC,GAAUmC,EAAShB,EAAU,cAC9B,CAACA,IAGGwB,GAAY5C,EAAAA,EAAAA,cACfC,GAAUmC,EAAShB,EAAU,gBAC9B,CAACA,IAGGyB,GAAY7C,EAAAA,EAAAA,cACfC,GAAUmC,EAAShB,EAAU,qBAC9B,CAACA,IAGG0B,GAAgB9C,EAAAA,EAAAA,cACnBC,GAAUmC,EAAShB,EAAU,kBAC9B,CAACA,IAGG2B,GAAiB/C,EAAAA,EAAAA,cACpBC,GAAUmC,EAAShB,EAAU,mBAC9B,CAACA,IAGG4B,GAAsBhD,EAAAA,EAAAA,cACzBC,GAAUmC,EAAShB,EAAU,wBAC9B,CAACA,IAGG6B,GAA4BjD,EAAAA,EAAAA,cAE/BC,GAAUmC,EAAShB,EAAU,4BAA4B,CAACA,IAEvD8B,GAAiBlD,EAAAA,EAAAA,cACpBC,GAAUmC,EAAShB,EAAU,iBAC9B,CAACA,IAGG+B,GAAoBnD,EAAAA,EAAAA,cACvBC,GAAUmC,EAAShB,EAAU,oBAC9B,CAACA,IAGH,OACE,2BACGiB,GAAUA,EAAOe,MAAMC,QACtB,gBAAC1B,EAAD,KACMU,EAAOe,MAAM,GADnB,CAEEtB,MAAQ,GAAEO,EAAOiB,eAAejB,EAAOkB,iBAG3C,gCACA,2BAAM9B,KAAKC,UAAUS,EAAU,KAAM,IACrC,gCACE,wCACA,0BAAQpC,QAASuC,GAAjB,aACA,0BAAQvC,QAASwC,GAAjB,aACA,0BAAQxC,QAASyC,GAAjB,WACA,0BAAQzC,QAAS2C,GAAjB,YAEF,gCACE,6CACA,0BAAQ3C,QAAS0C,GAAjB,eACA,0BAAQ1C,QAAS4C,GAAjB,WACA,0BAAQ5C,QAAS6C,GAAjB,WACA,0BAAQ7C,QAAS8C,GAAjB,WACA,0BAAQ9C,QAAS+C,GAAjB,eACA,0BAAQ/C,QAASgD,GAAjB,gBACA,0BAAQhD,QAASiD,GAAjB,qBACA,0BAAQjD,QAASkD,GAAjB,2BAGA,0BAAQlD,QAASmD,GAAjB,gBACA,0BAAQnD,QAASoD,GAAjB,qB,mOCzHRjD,eAAesD,EACb3I,EAAW,oDACXsC,GAEA,aAAaiD,MACV,UAAS,IAAIC,IAAIxF,GAAU4I,qCAAqCtG,IACjE,CACEoD,OAAQ,MACRC,KAAM,YAGPE,MAAMC,GAAQA,EAAIC,SAClBF,KAAKG,QAAQC,KAGX,SAAS4C,GAAU,UAAEC,EAAY,GAAd,UAAkBC,IAC1C,MAAOxC,EAAUiB,GAAUsB,EAG3B,OACE,2BACGtB,GAAUA,EAAOe,MAAMC,QACtB,gBAAC1B,EAAD,KACMU,EAAOe,MAAM,GADnB,CAEEtB,MAAQ,GAAEO,EAAOiB,eAAejB,EAAOwB,sBAG3C,iCACA,2BAAMpC,KAAKC,UAAUiC,EAAW,KAAM,IACtC,gCACE,6CACA,0BACE5D,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,yBAC/B,CAACA,KAHL,UAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,uBAC/B,CAACA,KAHL,YAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,4BAC/B,CAACA,KAHL,iBAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,yBAC/B,CAACA,KAHL,cAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,2BAC/B,CAACA,KAHL,gBAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,mBAC/B,CAACA,KAHL,UAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAU,6BAC/B,CAACA,KAHL,qBASF,gCACE,uCACC,CAAC,UAAW,YAAa,YAAa,WAAY,SAASxE,KAC1D,CAACkH,EAAO7G,IACN,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAUuD,EAAIpC,EAAW,uBAAsB0C,MAChD,CAAC1C,KAGF0C,MAKT,gCACE,wCACC,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,KAAKlH,KAAI,CAACmH,EAAQ9G,IACxC,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAUuD,EAAIpC,EAAW,yBAAwB2C,MAClD,CAAC3C,KAGD,OAAM2C,QAGX,CAAC,KAAM,QAAQnH,KAAI,CAACmH,EAAQ9G,IAC3B,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAUuD,EAAIpC,EAAW,yBAAwB2C,MAClD,CAAC3C,KAGD,UAAS2C,OAGd,EAAC,GAAM,GAAOnH,KAAI,CAACoH,EAAQ/G,IAC1B,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,uBAAsB4C,MACtD,CAAC5C,KAGD,SAAO4C,EAAS,KAAO,WAI/B,gCACE,iDACC,EAAC,GAAM,GAAOpH,KAAI,CAACoH,EAAQ/G,IAC1B,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GACC2D,EACExC,EACC,qCAAoC4C,MAEzC,CAAC5C,KAGD,qBAAmB4C,EAAS,KAAO,UAGxC,CAAC,KAAM,UAAW,UAAUpH,KAAI,CAACqH,EAAOhH,IACvC,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAUuD,EAAIpC,EAAW,uBAAsB6C,MAChD,CAAC7C,KAGD,SAAQ6C,QAIhB,gCACE,6CACC,CAAC,GAAI,GAAI,GAAGrH,KAAI,CAACsH,EAAOjH,IACvB,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,uBAAsB8C,MACtD,CAAC9C,KAGD,SAAQ8C,YAIhB,gCACE,0DACC,CAAC,EAAG,EAAG,EAAG,GAAGtH,KAAI,CAACuH,EAAKlH,IACtB,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GACC2D,EACExC,EACC,4CAA2C+C,MAEhD,CAAC/C,KAGD,UAAS+C,OAGd,CAAC,OAAQ,YAAYvH,KAAI,CAACwH,EAAKnH,IAC9B,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,0BAAyBgD,MACzD,CAAChD,KAGD,UAASgD,OAGd,CAAC,MAAO,QAAQxH,KAAI,CAACuH,EAAKlH,IACzB,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GACC2D,EACExC,EACC,4CAA2C+C,MAEhD,CAAC/C,KAGD,GAAE,IAAIiD,KAAKC,aAAa,QAAS,CACjCC,sBAAuB,IACtBC,OAAOL,EAAM,cAGnB,CAAC,EAAG,EAAG,EAAG,GAAGvH,KAAI,CAACuH,EAAKlH,IACtB,0BACEA,IAAKA,EACL8C,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,yBAAwB+C,MACxD,CAAC/C,KAGD,SAAQ+C,OAGd,0BACEpE,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,gCAChC,CAACA,KAHL,cAQA,0BACErB,SAASC,EAAAA,EAAAA,cACNC,GAAU2D,EAAUxC,EAAW,sBAChC,CAACA,KAHL,cC/KR,MAAMqD,EAAgB,IAAInI,EAAAA,GAqIX,SAASoI,IACtB,OACE,KAAEpH,EAAF,QAAQT,IACR,SAAEiD,EAAF,UAAYmB,EAAZ,SAAuBmB,EAAvB,UAAiCwB,EAAjC,OAA4C1C,IAtIhD,WACE,OAAO,KAAE5D,GAAQe,IAAYC,EAAAA,EAAAA,WAAS,KAAM,CAC1ChB,KAAM,UAEDT,EAAS8H,IAAcrG,EAAAA,EAAAA,WAC5B,KAAM,MAYR,OATAC,EAAAA,EAAAA,YAAU,KACR,MAAMvD,EAAgB,CACpByJ,EAAclH,YAAYG,WAAU,EAAGJ,KAAAA,KAAWe,EAAS,CAAEf,KAAAA,OAE/D,MAAO,KACLtC,EAAc4B,KAAK4B,GAAOA,EAAGC,mBAE9B,IAEI,CACL,CAAEnB,KAAAA,EAAMT,QAAAA,GACR,CACEiD,SAAU,IACR2E,EAAclI,aAAamB,WAAU,EAAGJ,KAAAA,KAAWqH,EAAWrH,KAChE2D,UAAW,CAACpG,EAAUoC,IAAQwH,EAAczH,aAAanC,EAAUoC,GACnEmF,SAAU,CAACvH,EAAUsC,IACnBsH,EAAcvH,YAAYrC,EAAUsC,GACtCyG,UAAW,CAAC/I,EAAUsC,IACpBsH,EAAcrH,aAAavC,EAAUsC,GACvC+D,OAASrG,GAAa4J,EAAc3H,aAAajC,GACjDwC,YAAcuB,GAAY6F,EAAcpH,YAAYuB,KA2GpDgG,GACJ/D,QAAQC,IAAI,CAAExD,KAAAA,EAAMT,QAAAA,IAEpB,MAAMmE,GAAY6D,EAAAA,EAAAA,UAChB,IACEC,OAAOC,QAAQlI,GAASmI,MACtB,EAAEC,GAAKC,WAAAA,MACU,8CAAfA,KAEN,CAACrI,IAGGsF,GAAW0C,EAAAA,EAAAA,UACf,IACEC,OAAOC,QAAQlI,GAASmI,MACtB,EAAEC,GAAKC,WAAAA,EAAYC,aAAAA,MACF,gDAAfD,GACiB,cAAjBC,KAEN,CAACtI,IAGG8G,GAAYkB,EAAAA,EAAAA,UAChB,IACEC,OAAOC,QAAQlI,GAASmI,MACtB,EAAEC,GAAKC,WAAAA,EAAYC,aAAAA,MACF,gDAAfD,GACiB,uBAAjBC,KAEN,CAACtI,IAGH,OACE,2BAASkF,UAAWC,EAAAA,EAAAA,SAClB,oCACA,gBAACnC,EAAD,CAAUC,SAAUA,IACpB,gBAACiB,EAAD,CAAWC,UAAWA,EAAWC,UAAWA,EAAWC,OAAQA,IAC/D,gBAACwC,EAAD,CAAWC,UAAWA,EAAWC,UAAWA,IAC5C,gBAAC1B,EAAD,CAAUC,SAAUA,EAAUC,SAAUA,IAC9B,OAAT9E,EACC,yCAEA,2BAAMmE,KAAKC,UAAUpE,EAAM,KAAM,O,6EC3PrC8H,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,mFAAoF,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,+DAA+D,MAAQ,GAAG,SAAW,4CAA4C,eAAiB,CAAC,kFAAkF,WAAa,MAE1YH,EAAwBI,OAAS,CAChC,QAAW,uBACX,KAAQ,wBAET,W,wDCTO,SAAS5I,EAAI6I,EAASC,GACzB,OAAO,QAAQ,SAAUC,EAAQC,GAC7B,IAAIC,EAAQ,EACZF,EAAOjI,WAAU,OAAyBkI,GAAY,SAAUE,GAC5DF,EAAWhI,KAAK6H,EAAQM,KAAKL,EAASI,EAAOD,e,gKCKrDG,EAAU,GAEdA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAE7B,IAAIC,EAAS,IAAI,UAASN,GAIxB,IAAK,kBAAkBV,EAAOiB,IAAIC,WAAY,CAC5C,IA+BIC,GAAiB,iBACjBC,EAAYD,EAAgB,EAAc,iBAE9CnB,EAAOiB,IAAII,OACT,MACA,cApCkB,SAAuBC,EAAGC,EAAGJ,GACnD,IAAKG,GAAKC,GAAKD,IAAMC,EACnB,OAAO,EAGT,IAAIC,EAEJ,IAAKA,KAAKF,EACR,KAAIH,GAAuB,YAANK,IAKjBF,EAAEE,KAAOD,EAAEC,GACb,OAAO,EAIX,IAAKA,KAAKD,EACR,KAAIJ,GAAuB,YAANK,GAKhBF,EAAEE,IACL,OAAO,EAIX,OAAO,EAQIC,CAAcL,EAAWD,EAAgB,EAAc,iBAAgBA,IAMtEC,EAAYD,EAAgB,EAAc,iBAE1CH,EAAO,YAPLhB,EAAOiB,IAAIC,gBAYzBlB,EAAOiB,IAAIS,SAAQ,WACjBV,OAMG,QAAe,WAAW,iBAAiB,sBAAiBW","sources":["webpack://@dev/app/../client/src/index.ts","webpack://@dev/app/../talks/src/services/Service.ts","webpack://@dev/app/../talks/src/services/BrowserService.ts","webpack://@dev/app/../talks/src/services/HelloService.ts","webpack://@dev/app/../talks/src/services/MessagesService.ts","webpack://@dev/app/../talks/src/services/SensorService.ts","webpack://@dev/app/../talks/src/services/VideoService.ts","webpack://@dev/app/../talks/src/services/RemoteService.ts","webpack://@dev/app/../talks/src/services/index.ts","webpack://@dev/app/../web/src/containers/Remote/Discover.tsx","webpack://@dev/app/../web/src/containers/Remote/RemoteAdb.tsx","webpack://@dev/app/../web/src/containers/Remote/RemoteTv.tsx","webpack://@dev/app/../web/src/containers/Remote/RemoteVcr.tsx","webpack://@dev/app/../web/src/containers/Remote/index.tsx","webpack://@dev/app/../web/src/containers/Remote/styles.module.scss","webpack://@dev/app/../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://@dev/app/../web/src/containers/Remote/styles.module.scss?24f0"],"sourcesContent":["import { GraphQLClient } from \"graphql-request\";\nimport { createClient } from \"graphql-ws\";\n\n// https://shammelburg.medium.com/subscriptions-with-graphql-dfa8279af050\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\nexport const client = new GraphQLClient(`${location.pathname}graphql`, {\n  headers: {\n    // authorization: `Bearer ${localStorage.getItem('token')}`,\n  },\n});\n\nexport const subscriptions = createClient({\n  url: `${{ \"https:\": \"wss:\" }[location.protocol] || \"ws:\"}//${location.host}${\n    location.pathname\n  }subscriptions`,\n});\n","import { client, subscriptions } from \"@dev/client\";\n\nexport class Service {\n  client = client;\n  subscriptions = subscriptions;\n}\n","import { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst FILES = gql`\n  query {\n    files {\n      name\n    }\n  }\n`;\n\nexport class BrowserService extends Service {\n  files() {\n    return from(this.client.request(FILES));\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst HELLO = gql`\n  query {\n    hello\n  }\n`;\n\nexport class HelloService extends Service {\n  hello() {\n    return from(this.client.request(HELLO));\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst MESSAGES = gql`\n  query MessagesQuery {\n    messages {\n      uuid\n      text\n    }\n  }\n`;\n\nconst ON_MESSAGE = gql`\n  subscription MessageSubscription {\n    message {\n      uuid\n      text\n    }\n  }\n`;\n\nconst SEND_MESSAGE = gql`\n  mutation SendMessageMutation($message: MessageInput) {\n    sendMessage(message: $message)\n  }\n`;\n\n// https://github.com/shammelburg/graphql-rxjs-angular/blob/main/src/app/services/graphql.service.ts\n// https://codesandbox.io/s/push-based-react-lab-3-vc8d6?file=/src/users/state/users.service.ts\n// https://jasonwatmore.com/post/2020/04/21/react-hooks-rxjs-communicating-between-components-with-observable-subject\nexport class MessagesService extends Service {\n  getMessages() {\n    return from(this.client.request(MESSAGES));\n  }\n  sendMessage(message) {\n    return from(this.client.request(SEND_MESSAGE, { message }));\n  }\n  onMessage() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_MESSAGE },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst ON_SENSOR = gql`\n  subscription SensorSubscription {\n    sensor {\n      data\n    }\n  }\n`;\n\nexport class SensorService extends Service {\n  onSensor() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_SENSOR },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { Service } from \"./Service\";\n\nconst ON_SIGNAL = gql`\n  subscription SignalSubscription {\n    signal {\n      sdp\n      type\n      candidate {\n        candidate\n        sdpMLineIndex\n        sdpMid\n      }\n    }\n  }\n`;\n\nconst SEND_SIGNAL = gql`\n  mutation SendSignalMutation($signal: SignalInput) {\n    sendSignal(signal: $signal)\n  }\n`;\n\nexport class VideoService extends Service {\n  sendSignal(signal) {\n    return from(this.client.request(SEND_SIGNAL, { signal }));\n  }\n  onSignal() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_SIGNAL },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { gql } from \"graphql-request\";\nimport { from, Observable } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport { Service } from \"./Service\";\n\nconst GET_DEVICES = gql`\n  query GetDevicesQuery {\n    devices {\n      data\n    }\n  }\n`;\n\nconst GET_VERSION = gql`\n  query GetVersionQuery($location: String) {\n    version(location: $location)\n  }\n`;\n\nconst REMOTE_RCU = gql`\n  query RemoteRcuQuery($location: String, $key: String) {\n    remoteRcu(location: $location, key: $key) {\n      data\n    }\n  }\n`;\n\nconst REMOTE_TV = gql`\n  query RemoteTvQuery($location: String, $action: String) {\n    remoteTv(location: $location, action: $action) {\n      data\n    }\n  }\n`;\n\nconst REMOTE_VCR = gql`\n  query RemoteVcrQuery($location: String, $action: String) {\n    remoteVcr(location: $location, action: $action) {\n      data\n    }\n  }\n`;\n\nconst ON_REMOTE = gql`\n  subscription RemoteSubscription {\n    remote {\n      data\n    }\n  }\n`;\n\nconst SEND_REMOTE = gql`\n  mutation SendRemoteMutation($remote: RemoteInput) {\n    sendRemote(remote: $remote)\n  }\n`;\n\ntype RcuKey = \"KeyStandBy\" | \"KeyVolumeDown\" | \"KeyVolumeUp\";\n\nexport class RemoteService extends Service {\n  getDevices() {\n    return from(this.client.request(GET_DEVICES)).pipe(\n      map(({ devices }) => devices)\n    );\n  }\n  getStatusAdb(location: string) {\n    return from(this.client.request(GET_VERSION, { location })).pipe(\n      map(({ version }) => version)\n    );\n  }\n  getRemoteRcu(location: string, key: RcuKey) {\n    return from(this.client.request(REMOTE_RCU, { location, key }));\n  }\n  getRemoteTv(location: string, action: string) {\n    return from(this.client.request(REMOTE_TV, { location, action }));\n  }\n  getRemoteVcr(location: string, action: string) {\n    return from(this.client.request(REMOTE_VCR, { location, action }));\n  }\n  sendMessage(data) {\n    return from(this.client.request(SEND_REMOTE, { data }));\n  }\n  onMessage() {\n    return new Observable((observer) =>\n      this.subscriptions.subscribe(\n        { query: ON_REMOTE },\n        {\n          next: ({ data, errors }) =>\n            errors ? observer.error(errors[0]) : observer.next(data.remote),\n          error: (error) => observer.error(error),\n          complete: () => observer.complete(),\n        }\n      )\n    );\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport { BrowserService } from \"./BrowserService\";\nimport { HelloService } from \"./HelloService\";\nimport { MessagesService } from \"./MessagesService\";\nimport { SensorService } from \"./SensorService\";\nimport { VideoService } from \"./VideoService\";\n\nexport * from \"./RemoteService\";\n\nconst helloService = new HelloService();\n\nexport function useHello() {\n  const [state, setState] = useState({ hello: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      helloService\n        .hello()\n        .subscribe(({ hello }) => setState((state) => ({ ...state, hello }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state];\n}\n\nconst messageService = new MessagesService();\n\n// https://codesandbox.io/s/push-based-react-lab-3-vc8d6?file=/src/users/hooks/users.hook.ts\nexport function useMessages() {\n  const [{ messages }, setState] = useState(() => ({\n    messages: null,\n  }));\n\n  useEffect(() => {\n    const subscriptions = [\n      messageService\n        .getMessages()\n        .subscribe(({ messages }) =>\n          setState((state) => ({ ...state, messages }))\n        ),\n      messageService.onMessage().subscribe(({ message }) =>\n        setState(({ messages, ...state }) => ({\n          ...state,\n          messages: messages.concat([message]),\n        }))\n      ),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [\n    { messages },\n    { sendMessage: (message) => messageService.sendMessage(message) },\n  ];\n}\n\nconst sensorService = new SensorService();\n\nexport function useSensor() {\n  const [{ values }, setState] = useState(() => ({\n    values: null,\n  }));\n\n  useEffect(() => {\n    const subscriptions = [\n      sensorService.onSensor().subscribe(({ sensor }) =>\n        setState(({ values, ...state }) => ({\n          ...state,\n          values: (values || []).concat([sensor]),\n        }))\n      ),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [{ values }, {}];\n}\n\nconst videoService = new VideoService();\n\nexport function useVideo() {\n  const [state, setState] = useState({ hello: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      videoService\n        .onSignal()\n        .subscribe(({ signal }) => setState((state) => ({ ...state, signal }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state, { sendSignal: (signal) => videoService.sendSignal(signal) }];\n}\n\nconst browserService = new BrowserService();\n\nexport function useFiles() {\n  const [state, setState] = useState({ files: null });\n\n  useEffect(() => {\n    const subscriptions = [\n      browserService\n        .files()\n        .subscribe(({ files }) => setState((state) => ({ ...state, files }))),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [state];\n}\n","import React, { MouseEventHandler, useCallback } from \"react\";\n\nexport function Discover({ discover }) {\n  return (\n    <div>\n      <h3>UPNP</h3>\n      <button\n        onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n          (event) => discover(),\n          []\n        )}\n      >\n        Discover\n      </button>\n    </div>\n  );\n}\n","import React, { MouseEventHandler, useCallback, useState } from \"react\";\n\nasync function adb(location = \"http://192.168.2.101:8080\", key = \"KeyStandBy\") {\n  return await fetch(`${new URL(location).origin}/control/rcu`, {\n    method: \"POST\",\n    mode: \"no-cors\",\n    body: `Keypress=${key}`,\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n  })\n    .then((res) => res.text())\n    .then(console.log);\n}\n\nexport function RemoteAdb({ deviceAdb = [], remoteRcu, status }) {\n  const [version, setVersion] = useState(() => ({}));\n  const [LOCATION] = deviceAdb;\n\n  const onVersion = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => status(LOCATION).subscribe(setVersion),\n    [LOCATION]\n  );\n\n  const onStandBy = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => adb(LOCATION, \"KeyStandBy\"),\n    [LOCATION]\n  );\n\n  const onVolumeDown = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => adb(LOCATION, \"KeyVolumeDown\"),\n    [LOCATION]\n  );\n\n  const onVolumeUp = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteRcu(LOCATION, \"KeyVolumeUp\"),\n    [LOCATION]\n  );\n\n  return (\n    <div>\n      <h3>ADB</h3>\n      <pre>{JSON.stringify(deviceAdb, null, 2)}</pre>\n      <fieldset>\n        <legend>Information</legend>\n        <button onClick={onVersion}>Version</button>\n        <pre>{JSON.stringify(version, null, 2)}</pre>\n      </fieldset>\n      <fieldset>\n        <legend>Power</legend>\n        <button onClick={onStandBy}>StandBy</button>\n      </fieldset>\n      <fieldset>\n        <legend>Volume</legend>\n        <button onClick={onVolumeDown}>Volume -</button>\n        <button onClick={onVolumeUp}>Volume +</button>\n      </fieldset>\n      <fieldset>\n        <legend>Playback</legend>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => adb(LOCATION, \"KeyPause\"),\n            [LOCATION]\n          )}\n        >\n          Pause\n        </button>\n        <button onClick={onVolumeUp}>Volume +</button>\n      </fieldset>\n    </div>\n  );\n}\n","import React, { MouseEventHandler, useCallback } from \"react\";\nimport styles from \"./styles.module.scss\";\n\nimport type { IconType } from \"@dev/device\";\n\nexport function Icon({\n  url,\n  width,\n  height,\n  title,\n}: IconType & { title: string }) {\n  return (\n    <img\n      className={styles.Icon}\n      src={url}\n      width={width}\n      height={height}\n      title={title}\n    />\n  );\n}\n\nexport function RemoteTv({ deviceTv = [], remoteTv }) {\n  const [LOCATION, device] = deviceTv;\n\n  const onGetVolume = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"GetVolume\"),\n    [LOCATION]\n  );\n\n  const onSetVolume = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"SetVolume\"),\n    [LOCATION]\n  );\n\n  const onGetMute = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"GetMute\"),\n    [LOCATION]\n  );\n\n  const onListPresets = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"ListPresets\"),\n    [LOCATION]\n  );\n\n  const onSetMute = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"SetMute\"),\n    [LOCATION]\n  );\n\n  const onSendKey = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_SendKey\"),\n    [LOCATION]\n  );\n\n  const onAppType = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_LaunchApp\"),\n    [LOCATION]\n  );\n\n  const onPinCode = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_DisplayPinCode\"),\n    [LOCATION]\n  );\n\n  const onRequestAuth = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_RequestAuth\"),\n    [LOCATION]\n  );\n\n  const onGetAudioList = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_GetAudioList\"),\n    [LOCATION]\n  );\n\n  const onGetCurrentAudioID = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"X_GetCurrentAudioID\"),\n    [LOCATION]\n  );\n\n  const onGetCurrentConnectionIDs = useCallback<\n    MouseEventHandler<HTMLButtonElement>\n  >((event) => remoteTv(LOCATION, \"GetCurrentConnectionIDs\"), [LOCATION]);\n\n  const onGetMediaInfo = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"GetMediaInfo\"),\n    [LOCATION]\n  );\n\n  const onGetProtocolInfo = useCallback<MouseEventHandler<HTMLButtonElement>>(\n    (event) => remoteTv(LOCATION, \"GetProtocolInfo\"),\n    [LOCATION]\n  );\n\n  return (\n    <div>\n      {device && device.icons.length && (\n        <Icon\n          {...device.icons[0]}\n          title={`${device.modelName} / ${device.modelNumber}`}\n        />\n      )}\n      <h3>TV</h3>\n      <pre>{JSON.stringify(deviceTv, null, 2)}</pre>\n      <fieldset>\n        <legend>Volume</legend>\n        <button onClick={onGetVolume}>GetVolume</button>\n        <button onClick={onSetVolume}>SetVolume</button>\n        <button onClick={onGetMute}>GetMute</button>\n        <button onClick={onSetMute}>SetMute</button>\n      </fieldset>\n      <fieldset>\n        <legend>Information</legend>\n        <button onClick={onListPresets}>ListPresets</button>\n        <button onClick={onSendKey}>SendKey</button>\n        <button onClick={onAppType}>AppType</button>\n        <button onClick={onPinCode}>PinCode</button>\n        <button onClick={onRequestAuth}>RequestAuth</button>\n        <button onClick={onGetAudioList}>GetAudioList</button>\n        <button onClick={onGetCurrentAudioID}>GetCurrentAudioID</button>\n        <button onClick={onGetCurrentConnectionIDs}>\n          GetCurrentConnectionIDs\n        </button>\n        <button onClick={onGetMediaInfo}>GetMediaInfo</button>\n        <button onClick={onGetProtocolInfo}>GetProtocolInfo</button>\n      </fieldset>\n    </div>\n  );\n}\n","import React, { MouseEventHandler, useCallback } from \"react\";\nimport { Icon } from \"./RemoteTv\";\n\nasync function vcr(\n  location = \"http://192.168.2.100:49154/MediaRenderer/desc.xml\",\n  action\n) {\n  return await fetch(\n    `http://${new URL(location).hostname}/YamahaExtendedControl/v1/${action}`,\n    {\n      method: \"GET\",\n      mode: \"no-cors\",\n    }\n  )\n    .then((res) => res.text())\n    .then(console.log);\n}\n\nexport function RemoteVcr({ deviceVcr = [], remoteVcr }) {\n  const [LOCATION, device] = deviceVcr;\n\n  // https://github.com/honnel/yamaha-commands#http-api---input-and-volume\n  return (\n    <div>\n      {device && device.icons.length && (\n        <Icon\n          {...device.icons[0]}\n          title={`${device.modelName} / ${device.modelDescription}`}\n        />\n      )}\n      <h3>VCR</h3>\n      <pre>{JSON.stringify(deviceVcr, null, 2)}</pre>\n      <fieldset>\n        <legend>Information</legend>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"system/getDeviceInfo\"),\n            [LOCATION]\n          )}\n        >\n          Device\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"system/getFeatures\"),\n            [LOCATION]\n          )}\n        >\n          Features\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"system/getNetworkStatus\"),\n            [LOCATION]\n          )}\n        >\n          NetworkStatus\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"system/getFuncStatus\"),\n            [LOCATION]\n          )}\n        >\n          FuncStatus\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"system/getLocationInfo\"),\n            [LOCATION]\n          )}\n        >\n          LocationInfo\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"main/getStatus\"),\n            [LOCATION]\n          )}\n        >\n          Status\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, \"main/getSoundProgramList\"),\n            [LOCATION]\n          )}\n        >\n          SoundProgramList\n        </button>\n      </fieldset>\n      <fieldset>\n        <legend>Input</legend>\n        {[\"airplay\", \"bluetooth\", \"net_radio\", \"optical1\", \"tuner\"].map(\n          (input, key) => (\n            <button\n              key={key}\n              onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n                (event) => vcr(LOCATION, `main/setInput?input=${input}`),\n                [LOCATION]\n              )}\n            >\n              {input}\n            </button>\n          )\n        )}\n      </fieldset>\n      <fieldset>\n        <legend>Volume</legend>\n        {[50, 70, 90, 110, 130, 150].map((volume, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => vcr(LOCATION, `main/setVolume?volume=${volume}`),\n              [LOCATION]\n            )}\n          >\n            {`Set ${volume}%`}\n          </button>\n        ))}\n        {[\"up\", \"down\"].map((volume, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => vcr(LOCATION, `main/setVolume?volume=${volume}`),\n              [LOCATION]\n            )}\n          >\n            {`Volume ${volume}`}\n          </button>\n        ))}\n        {[true, false].map((enable, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => remoteVcr(LOCATION, `main/setMute?enable=${enable}`),\n              [LOCATION]\n            )}\n          >\n            {`Mute ${enable ? \"On\" : \"Off\"}`}\n          </button>\n        ))}\n      </fieldset>\n      <fieldset>\n        <legend>Power Functions</legend>\n        {[true, false].map((enable, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) =>\n                remoteVcr(\n                  LOCATION,\n                  `system/setAutoPowerStandby?enable=${enable}`\n                ),\n              [LOCATION]\n            )}\n          >\n            {`AutoPowerStandby ${enable ? \"On\" : \"Off\"}`}\n          </button>\n        ))}\n        {[\"on\", \"standby\", \"toggle\"].map((power, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => vcr(LOCATION, `main/setPower?power=${power}`),\n              [LOCATION]\n            )}\n          >\n            {`Power ${power}`}\n          </button>\n        ))}\n      </fieldset>\n      <fieldset>\n        <legend>Sleep Timer</legend>\n        {[60, 30, 0].map((timer, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => remoteVcr(LOCATION, `main/setSleep?sleep=${timer}`),\n              [LOCATION]\n            )}\n          >\n            {`Sleep ${timer} min`}\n          </button>\n        ))}\n      </fieldset>\n      <fieldset>\n        <legend>AM/FM/DAB Tuner Commands</legend>\n        {[1, 2, 3, 4].map((num, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) =>\n                remoteVcr(\n                  LOCATION,\n                  `tuner/recallPreset?zone=main&band=fm&num=${num}`\n                ),\n              [LOCATION]\n            )}\n          >\n            {`Preset ${num}`}\n          </button>\n        ))}\n        {[\"next\", \"previous\"].map((dir, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => remoteVcr(LOCATION, `tuner/switchPreset?dir=${dir}`),\n              [LOCATION]\n            )}\n          >\n            {`Preset ${dir}`}\n          </button>\n        ))}\n        {[87500, 105200].map((num, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) =>\n                remoteVcr(\n                  LOCATION,\n                  `tuner/setSleep?band=fm&tuning=direct&num=${num}`\n                ),\n              [LOCATION]\n            )}\n          >\n            {`${new Intl.NumberFormat(\"pl-PL\", {\n              maximumFractionDigits: 2,\n            }).format(num / 1000)} MHz`}\n          </button>\n        ))}\n        {[5, 6, 7, 8].map((num, key) => (\n          <button\n            key={key}\n            onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n              (event) => remoteVcr(LOCATION, `tuner/storePreset?num=${num}`),\n              [LOCATION]\n            )}\n          >\n            {`Store ${num}`}\n          </button>\n        ))}\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, `tuner/getPresetInfo?band=fm`),\n            [LOCATION]\n          )}\n        >\n          PresetInfo\n        </button>\n        <button\n          onClick={useCallback<MouseEventHandler<HTMLButtonElement>>(\n            (event) => remoteVcr(LOCATION, `tuner/getPlayInfo`),\n            [LOCATION]\n          )}\n        >\n          PlayInfo\n        </button>\n      </fieldset>\n    </div>\n  );\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { RemoteService } from \"@dev/talks/src/services\";\nimport { Discover } from \"./Discover\";\nimport { RemoteAdb } from \"./RemoteAdb\";\nimport { RemoteTv } from \"./RemoteTv\";\nimport { RemoteVcr } from \"./RemoteVcr\";\nimport styles from \"./styles.module.scss\";\n\nimport type { DeviceType } from \"@dev/device\";\n\nconst base = \"http://192.168.2.101:8080\";\n\nconst keys = {\n  VOD: 361,\n  POWER: 116,\n  N: 174,\n  EPG: 365,\n  HOME: 102,\n\n  INFO: 358,\n  APP: 367,\n  OPT: 357,\n\n  VOL_P: 115,\n  VOL_M: 114,\n\n  UP: 103,\n  LEFT: 105,\n  OK: 352,\n  RIGHT: 106,\n  DOWN: 108,\n\n  PR_P: 402,\n  PR_M: 403,\n\n  BACK: 158,\n\n  STOP: 128,\n  REV: 168,\n  PAUSE: 119,\n  PLAY: 207,\n  FF: 159,\n  REC: 167,\n\n  MUTE: 113,\n  PORTAL: 102,\n  TEXT: 388,\n  LIST: 395,\n\n  RADIO: 385,\n\n  RED: 398,\n  GREEN: 399,\n  YELLOW: 400,\n  BLUE: 401,\n\n  \"1\": 2,\n  \"2\": 3,\n  \"3\": 4,\n  \"4\": 5,\n  \"5\": 6,\n  \"6\": 7,\n  \"7\": 8,\n  \"8\": 9,\n  \"9\": 10,\n  \"0\": 11,\n\n  SETUP: 367,\n  STAR: 1,\n};\n\nfunction delay(timeout = 100) {\n  return new Promise((resolve) => setTimeout(resolve, timeout));\n}\n\nconst remoteService = new RemoteService();\n\nfunction useRemote() {\n  const [{ data }, setState] = useState(() => ({\n    data: null,\n  }));\n  const [devices, setDevices] = useState<Record<string, DeviceType>>(\n    () => ({})\n  );\n\n  useEffect(() => {\n    const subscriptions = [\n      remoteService.onMessage().subscribe(({ data }) => setState({ data })),\n    ];\n    return () => {\n      subscriptions.map((it) => it.unsubscribe());\n    };\n  }, []);\n\n  return [\n    { data, devices },\n    {\n      discover: () =>\n        remoteService.getDevices().subscribe(({ data }) => setDevices(data)),\n      remoteRcu: (location, key) => remoteService.getRemoteRcu(location, key),\n      remoteTv: (location, action) =>\n        remoteService.getRemoteTv(location, action),\n      remoteVcr: (location, action) =>\n        remoteService.getRemoteVcr(location, action),\n      status: (location) => remoteService.getStatusAdb(location),\n      sendMessage: (message) => remoteService.sendMessage(message),\n    },\n  ];\n}\n\n// https://github.com/HubertReX/Flask-Home-Automation/blob/master/send_key2ncplus.py\n// http://192.168.2.101:8080/upnpdev/pres/uuid_1651c520-1dd2-11b2-a7dd-c477af3c9c7f/00\n\nasync function event(ev: string, code: number) {\n  return await exec(`<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  <s:Envelope s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">\n     <s:Body>\n        <u:ProcessInputEvent xmlns:u=\"urn:adbglobal.com:service:X_ADB_RemoteControl:1\">\n           <InputEvent>ev=${ev},code=${code}</InputEvent>\n        </u:ProcessInputEvent>\n     </s:Body>\n  </s:Envelope>`)\n    .then((res) => res.text())\n    .then((data) => console.log(data));\n}\n\n// https://raw.githubusercontent.com/rafikel/Fibaro/master/ncplus/ncplus.lua\n\nasync function exec(\n  body: string,\n  action = \"urn:adbglobal.com:service:X_ADB_RemoteControl:1#ProcessInputEvent\"\n) {\n  const ctrl = \"/upnpfun/ctrl/uuid_1651c520-1dd2-11b2-a7dd-c477af3c9c7f/04\";\n  // const ctrl = '/upnpfun/ctrl/uuid_1651c520-1dd2-11b2-a7dd-c477af3c9c7f/01'\n  const url = `${base}${ctrl}`;\n\n  console.log(body);\n\n  return await fetch(url, {\n    method: \"POST\",\n    body,\n    headers: {\n      SOAPACTION: `\"${action}\"`,\n      // \"SOAPACTION\": '',\n      // \"SOAPACTION\": '\"urn:adbglobal.com:service:X_ADB_RemoteControl:1\"',\n      // \"SOAPACTION\": 'urn:adbglobal.com:service:X_ADB_RemoteControl:1#ProcessInputEvent',\n      // \"CONTENT-TYPE\": 'text/xml; charset=\"utf-8\"',\n      // \"HOST\": \"192.168.2.101:8080\",\n      // 'Content-type': 'application/xml',\n      // 'Content-Type': 'application/json'\n      // 'Content-Type': 'application/x-www-form-urlencoded',\n    },\n  });\n}\n\nasync function test() {\n  // upnpReqest(tcpDEVICE, virtualIP, virtualPort,\n  //   \"/upnpfun/ctrl/\" .. boxId .. \"/04\",\n  //   \"adbglobal.com\",\n  //   \"X_ADB_RemoteControl:1\",\n  //   \"ProcessInputEvent\",\n  //   \"<InputEvent>ev=keydn,code=\" .. key .. \"</InputEvent>\"\n  // );\n\n  // await exec(`<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  // <s:Envelope s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  //    <s:Body>\n  //       <u:ProcessInputEvent xmlns:u=\"urn:adbglobal.com:service:X_ADB_RemoteControl:1\">\n  //          <InputEvent>ev=${status},code=${keys.POWER}</InputEvent>\n  //       </u:ProcessInputEvent>\n  //    </s:Body>\n  // </s:Envelope>`).then(res => res.text())\n  // .then(data => console.log(data))\n\n  // response = upnpReqest(tcpDEVICE, virtualIP, virtualPort,\n  //   \"/upnpfun/ctrl/\" .. boxId .. \"/01\",\n  //   \"schemas-upnp-org\",\n  //   \"ContentDirectory:2\",\n  //   \"GetSystemUpdateID\",\n  //   \"\"\n  // );\n\n  // await exec(`<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  // <s:Envelope s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  //    <s:Body>\n  //       <u:GetSystemUpdateID xmlns:u=\"urn:schemas-upnp-org:service:ContentDirectory:2\">\n  //       </u:GetSystemUpdateID>\n  //    </s:Body>\n  // </s:Envelope>`,\"urn:schemas-upnp-org:service:ContentDirectory:2#GetSystemUpdateID\").then(res => res.text())\n  // .then(data => console.log(data))\n\n  const code = keys.POWER;\n\n  await event(\"keydown\", code);\n  await delay(1000);\n  await event(\"keyup\", code);\n\n  // await exec(`<?xml version=\"1.0\" encoding=\"utf-8\"?>\n  //   <s:Envelope s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">\n  //      <s:Body>\n  //         <u:ProcessInputEvent xmlns:u=\"urn:adbglobal.com:service:X_ADB_RemoteControl:1\">\n  //            <InputEvent>ev=${status},code=${key}</InputEvent>\n  //         </u:ProcessInputEvent>\n  //      </s:Body>\n  //   </s:Envelope>`).then(res => res.text())\n  // .then(data => console.log(data))\n}\n\nexport default function Remote() {\n  const [\n    { data, devices },\n    { discover, remoteRcu, remoteTv, remoteVcr, status },\n  ] = useRemote();\n  console.log({ data, devices });\n\n  const deviceAdb = useMemo(\n    () =>\n      Object.entries(devices).find(\n        ([_, { deviceType }]) =>\n          deviceType === \"urn:schemas-upnp-org:device:MediaServer:3\"\n      ),\n    [devices]\n  );\n\n  const deviceTv = useMemo(\n    () =>\n      Object.entries(devices).find(\n        ([_, { deviceType, manufacturer }]) =>\n          deviceType === \"urn:schemas-upnp-org:device:MediaRenderer:1\" &&\n          manufacturer === \"Panasonic\"\n      ),\n    [devices]\n  );\n\n  const deviceVcr = useMemo(\n    () =>\n      Object.entries(devices).find(\n        ([_, { deviceType, manufacturer }]) =>\n          deviceType === \"urn:schemas-upnp-org:device:MediaRenderer:1\" &&\n          manufacturer === \"Yamaha Corporation\"\n      ),\n    [devices]\n  );\n\n  return (\n    <section className={styles.Section}>\n      <h2>Remote</h2>\n      <Discover discover={discover} />\n      <RemoteAdb deviceAdb={deviceAdb} remoteRcu={remoteRcu} status={status} />\n      <RemoteVcr deviceVcr={deviceVcr} remoteVcr={remoteVcr} />\n      <RemoteTv deviceTv={deviceTv} remoteTv={remoteTv} />\n      {data === null ? (\n        <div>Loading...</div>\n      ) : (\n        <pre>{JSON.stringify(data, null, 2)}</pre>\n      )}\n    </section>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".DeTwnNnGKuydH91RohQA{color:purple}.SYX0OCrHUmkg91C1SqCq{float:right;margin:1em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../web/src/containers/Remote/styles.module.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CAEF,sBACE,WAAA,CACA,UAAA\",\"sourcesContent\":[\".Section {\\n  color: purple;\\n}\\n.Icon {\\n  float: right;\\n  margin: 1em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"Section\": \"DeTwnNnGKuydH91RohQA\",\n\t\"Icon\": \"SYX0OCrHUmkg91C1SqCq\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./styles.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["client","GraphQLClient","location","pathname","headers","subscriptions","createClient","url","protocol","host","Service","FILES","gql","HELLO","MESSAGES","ON_MESSAGE","SEND_MESSAGE","ON_SENSOR","ON_SIGNAL","SEND_SIGNAL","GET_DEVICES","GET_VERSION","REMOTE_RCU","REMOTE_TV","REMOTE_VCR","ON_REMOTE","SEND_REMOTE","RemoteService","getDevices","from","this","request","pipe","map","devices","getStatusAdb","version","getRemoteRcu","key","getRemoteTv","action","getRemoteVcr","sendMessage","data","onMessage","Observable","observer","subscribe","query","next","errors","error","remote","complete","helloService","hello","useHello","state","setState","useState","useEffect","it","unsubscribe","messageService","getMessages","message","useMessages","messages","concat","sensorService","onSensor","useSensor","values","sensor","videoService","sendSignal","signal","onSignal","useVideo","browserService","files","useFiles","Discover","discover","onClick","useCallback","event","async","adb","fetch","URL","origin","method","mode","body","then","res","text","console","log","RemoteAdb","deviceAdb","remoteRcu","status","setVersion","LOCATION","onVersion","onStandBy","onVolumeDown","onVolumeUp","JSON","stringify","Icon","width","height","title","className","styles","src","RemoteTv","deviceTv","remoteTv","device","onGetVolume","onSetVolume","onGetMute","onListPresets","onSetMute","onSendKey","onAppType","onPinCode","onRequestAuth","onGetAudioList","onGetCurrentAudioID","onGetCurrentConnectionIDs","onGetMediaInfo","onGetProtocolInfo","icons","length","modelName","modelNumber","vcr","hostname","RemoteVcr","deviceVcr","remoteVcr","modelDescription","input","volume","enable","power","timer","num","dir","Intl","NumberFormat","maximumFractionDigits","format","remoteService","Remote","setDevices","useRemote","useMemo","Object","entries","find","_","deviceType","manufacturer","___CSS_LOADER_EXPORT___","push","module","id","locals","project","thisArg","source","subscriber","index","value","call","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","update","hot","invalidate","isNamedExport","oldLocals","accept","a","b","p","isEqualLocals","dispose","undefined"],"sourceRoot":""}